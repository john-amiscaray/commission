{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { ProfilePictureSelectComponent } from \"./profile-picture-select/profile-picture-select.component\";\nimport { ProfileNameSelectComponent } from \"./profile-name-select/profile-name-select.component\";\nimport { ProfilePictureService } from \"../../services/profile-picture.service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"../../services/profile-picture.service\";\nexport let ProfilePage = /*#__PURE__*/(() => {\n  class ProfilePage {\n    constructor(http, auth, pop, pfp) {\n      this.http = http;\n      this.auth = auth;\n      this.pop = pop;\n      this.pfp = pfp;\n      this.nameInputValue = '';\n      this.selectedImage = '';\n    }\n\n    ionViewDidEnter() {\n      if (!this.auth.getName()) {\n        this.http.get('/assets/files/names.txt', {\n          responseType: 'text'\n        }).subscribe(res => {\n          let names = res.split('\\n'); // The last element is blank\n\n          names.pop();\n          this.username = names[Math.floor(Math.random() * names.length)];\n          this.auth.setName(this.username);\n        });\n      } else {\n        this.username = this.auth.getName();\n      }\n\n      let pfp = this.pfp.getProfilePicture();\n\n      if (pfp) {\n        this.selectedImage = this.pfp.getProfilePictureFromName(pfp);\n      } else {\n        this.pfp.setProfilePicture(ProfilePictureService.Dog);\n        this.selectedImage = this.pfp.getProfilePictureFromName(ProfilePictureService.Dog);\n      }\n    }\n\n    presentProfilePictures() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let popover = yield this.pop.create({\n          component: ProfilePictureSelectComponent\n        });\n        yield popover.present();\n        popover.onDidDismiss().then(res => {\n          if (res.data) {\n            this.selectedImage = res.data;\n          }\n        });\n      });\n    }\n\n    presentNameSelect(ev) {\n      return __awaiter(this, void 0, void 0, function* () {\n        let popover = yield this.pop.create({\n          component: ProfileNameSelectComponent,\n          event: ev\n        });\n        yield popover.present();\n        popover.onDidDismiss().then(res => {\n          if (res.data) {\n            this.username = res.data;\n            this.auth.setName(this.username);\n          }\n        });\n      });\n    }\n\n  }\n\n  ProfilePage.ɵfac = function ProfilePage_Factory(t) {\n    return new (t || ProfilePage)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.PopoverController), i0.ɵɵdirectiveInject(i4.ProfilePictureService));\n  };\n\n  ProfilePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfilePage,\n    selectors: [[\"app-profile\"]],\n    decls: 14,\n    vars: 2,\n    consts: [[\"color\", \"primary\"], [\"slot\", \"start\"], [\"id\", \"app-background\", \"src\", \"assets/images/background.png\", \"alt\", \"background\"], [\"id\", \"content\"], [\"id\", \"name-wrapper\", 3, \"click\"], [\"id\", \"edit-icon\", \"name\", \"pencil-outline\"], [\"id\", \"avatar-holder\", 3, \"click\"], [\"id\", \"avatar\", \"alt\", \"you\", 3, \"src\"]],\n    template: function ProfilePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\");\n        i0.ɵɵelementStart(1, \"ion-toolbar\", 0);\n        i0.ɵɵelement(2, \"ion-menu-button\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"ion-content\");\n        i0.ɵɵelement(4, \"img\", 2);\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵlistener(\"click\", function ProfilePage_Template_div_click_6_listener($event) {\n          return ctx.presentNameSelect($event);\n        });\n        i0.ɵɵelementStart(7, \"h1\");\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"ion-icon\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵlistener(\"click\", function ProfilePage_Template_div_click_10_listener() {\n          return ctx.presentProfilePictures();\n        });\n        i0.ɵɵelement(11, \"img\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"p\");\n        i0.ɵɵtext(13, \"Select an avatar to set a profile picture and click on your name to change it.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.username ? ctx.username : \"loading...\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"src\", ctx.selectedImage, i0.ɵɵsanitizeUrl);\n      }\n    },\n    directives: [i3.IonHeader, i3.IonToolbar, i3.IonMenuButton, i3.IonContent, i3.IonIcon],\n    styles: [\"#content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:30px auto;width:60%;align-items:center}#content[_ngcontent-%COMP%]   #name-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-content:center;position:relative;left:10px}#content[_ngcontent-%COMP%]   #name-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Marker,serif;font-size:35px;text-align:center}#content[_ngcontent-%COMP%]   #name-wrapper[_ngcontent-%COMP%]   #edit-icon[_ngcontent-%COMP%]{position:relative;top:33px;left:10px;width:25px;height:25px}#content[_ngcontent-%COMP%]   #avatar-holder[_ngcontent-%COMP%]{background:rgba(255,255,255,.65);box-shadow:0 4px 4px #00000040;width:206px;height:206px;border-radius:206px;display:flex;align-items:center;justify-content:center}#content[_ngcontent-%COMP%]   #avatar-holder[_ngcontent-%COMP%]   #avatar[_ngcontent-%COMP%]{width:85%;height:85%}#content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:40%;text-align:center}@media only screen and (max-width: 768px){#content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}}\"]\n  });\n  return ProfilePage;\n})();","map":null,"metadata":{},"sourceType":"module"}